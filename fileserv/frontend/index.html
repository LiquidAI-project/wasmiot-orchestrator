<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <link rel="StyleSheet" href="tempstyle.css" type="text/css" />
  <title>Wasm-IoT</title>
  <!-- Sentry bundle and init -->
  <script src="https://browser.sentry-cdn.com/7.51.2/bundle.tracing.min.js"
          crossorigin="anonymous"></script>

  <script src="sentry.js"></script>
  <script type="text/javascript" src="index.js"></script>

</head>
<body>
  
  <div id="header">
    <div  class="container">
      <div class="overlay"></div>
      <div class="terminal">
        <h1>WasmIoT - Orchestrator</h1>
        <div>
          <h1 id="status"></h1>
        </div>
      </div>
    </div>
  </div>

  <div id="content">
    <div id="selector">
      <h2  class="container">
        <div class="overlay"></div>
        <div class="terminal">
          Open a controller
        </div>
      </h2>
      <ul>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="resource-listing">
            Resources
          </div>
        </li>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="module-create">
            Module creation
          </div>
        </li>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="module-upload">
            Module upload
          </div>
        </li>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="deployment-create">
            Deployment manifest creation
          </div>
        </li>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="deployment-action">
            Deployment of deployment manifests
          </div>
        </li>
        <li>
          <div class="overlay"></div>
          <div class="terminal" data-control-id="execution-start">
            Execution
          </div>
        </li>
      </ul>
    </div>

    <div id="control-container">
      <!-- Resource listing. -->
      <div id="resource-listing" class="control hidden">
        <div class="overlay"></div>
        <div class="terminal">
          <ul>
            <li> 
              <a href="/file/device">Devices</a>
              <div>
                <form id="device-deleteall-form">
                  <input type="submit" value="DELETE ALL DEVICES"/>
                </form>
              </div>
              <div>
                <form id="device-discovery-reset-form">
                  <input type="submit" value="RESET DEVICE DISCOVERY"/>
                </form>
              </div>
            </li>
            <li>
              <a href="/file/module">Modules</a>
              <form id="module-deleteall-form">
                <input type="submit" value="DELETE ALL MODULES"/>
              </form>
            </li>
            <li>
              <a href="/file/manifest">Deployments</a>
              <form id="manifest-deleteall-form">
                <input type="submit" value="DELETE ALL MANIFESTS"/>
              </form>
            </li>
          </ul>
        </div>
      </div>

      <!-- Module creation (JSON and HTML-form). -->
      <div id="module-create" class="control selected">
        <div class="overlay"></div>
        <div class="terminal">
          <form id="module-form">
            <fieldset>
              <legend>Fill-in metadata for a new module</legend>
              <div>
                <div>
                  <label for="mname">Name</label>
                  <input id="mname" name="name" required type="text" value="">
                </div>
                <div>
                  <label for="mopenapi">OpenAPI description</label>
                  <textarea id="mopenapi" name="openapi" required>
{}
                  </textarea>
                </div>
              </div>
            </fieldset>
            <input class="input-view-switch" type="submit" value="Convert to JSON"/>
          </form>

          <form id="module-json-form" class="hidden">
            <fieldset>
                <legend>Submit a module in JSON</legend>
                <div>
                  <div>
                    <textarea id="mjjson" name="json" required>{}</textarea>
                  </div>
                </div>
            </fieldset>
            <input class="input-view-switch" type="button" value="Switch to form"/>
            <input type="submit" value="Submit"/>
          </form>
        </div>
      </div>

      <!-- Module upload. -->
      <div id="module-upload" class="control hidden">
        <div class="overlay"></div>
        <div class="terminal">
          <form id="wasm-form">
            <fieldset>
              <legend>Upload a file to attach to a module</legend>
              <div>
                <label for="wmodule-select">Select the module:</label>
                <select id="wmodule-select" name="id" required>
                  <option value="">Please select an existing module:</option>
                </select>
              </div>
              <div>
                <label for="wfile">File to upload</label>
                <input type="file" id="wfile" name="module" required>
              </div>
            </fieldset>
            <input type="submit" value="Submit"/>
          </form>
        </div>
      </div>

      <!-- Deployment manifest creation (JSON and HTML-form). -->
      <div id="deployment-create" class="control hidden">
        <div class="overlay"></div>
        <div class="terminal">
          <form id="deployment-form">
            <fieldset>
                <legend>Create a deployment manifest</legend>
                <div>
                  <div>
                    <label for="dname">Name</label>
                    <input id="dname" name="name" required type="text" value="">
                  </div>
                  <div>
                    <p>Procedure-call sequence:</p>
                    <ol id="dprocedure-sequence-list" data-json-key="sequence">
                    </ol>
                    <button type="button" id="dadd-procedure-row">Next</button>
                  </div>
                </div>
            </fieldset>
            <input class="input-view-switch" type="submit" value="Convert to JSON"/>
          </form>

          <form id="deployment-json-form" class="hidden">
            <fieldset>
                <legend>Submit a deployment manifest in JSON</legend>
                <div>
                  <div>
                    <textarea id="djson" name="json" required>{}</textarea>
                  </div>
                </div>
            </fieldset>
            <input class="input-view-switch" type="button" value="Switch to form"/>
            <input type="submit" value="Submit"/>
          </form>
        </div>
      </div>

      <!-- Deploying. -->
      <div id="deployment-action" class="control hidden">
        <div class="overlay"></div>
        <div class="terminal">
          <form id="deployment-action-form">
            <fieldset>
              <legend>Deploy</legend>
              <div>
                <div>
                  <label for="dmanifest-select">Select the deployment manifest:</label>
                    <select id="dmanifest-select" name="id" required>
                      <option value="">Please select a deployment manifest:</option>
                    </select>
                </div>
              </div>
            </fieldset>
            <input type="submit" value="Deploy!"/>
          </form>
        </div>
      </div>

      <!-- Execution. -->
      <div id="execution-start" class="control hidden">
        <div class="overlay"></div>
        <div class="terminal">
          <form id="execution-form">
            <fieldset>
              <legend>Execute</legend>
              <div>
                <div>
                  <label for="edeployment-select">Select the deployment:</label>
                    <select id="edeployment-select" name="id" required>
                      <option value="">Please select a deployment:</option>
                    </select>
                </div>
                <!-- Generate here the needed form-fields according to (Thing?) Description -->
              </div>
            </fieldset>
            <input type="submit" value="Execute!"/>
          </form>
        </div>
      </div>
    </div>
  </div>
</body>
</html>